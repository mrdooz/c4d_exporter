binary_namespace = protocol;
friendly_namespace = scene;

struct Transform
{
    float pos[3];
    float rot[3];
    float scale[3];
};

struct Base
{
    string name;
    int id;
    int parent_id;
    Transform xform_local;
    Transform xform_global;
};

struct DataStream
{
    string name;
    int flags;
    bytes data;
};

struct Material
{
    int id;
    // 4cc
    int type;
    float r, g, b, a;
    string texture;
    float brightness;  
};

struct MaterialGroup
{
    int material_id;
    int start_index;
    int num_indices;
};

struct Mesh : Base
{
    int num_verts;
    int num_indices;
    MaterialGroup material_groups[];
    DataStreams data_streams[];

    // bounding sphere
    float sx, sy, sz, r;
};

struct NullObject : Base
{

};

struct Camera : Base
{
    float vertical_fov;
    float near_plane, far_plane;
    int? target_id;
};

struct Scene
{
    NullObject null_objects[];
    Material materials[];
    Mesh meshes[];
    Camera cameras[];
};
